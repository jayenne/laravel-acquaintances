# Verifications

Add the trait to your user model:

```php
use Multicaret\Acquaintances\Traits\Verifiable;

class User extends Model { use Verifiable; }
```

## Basic Operations

```php
// Send verification request
$user->verify($recipient, $message = null, $group = null);

// Remove verification
$user->unverify($recipient, $verificationId);

// Handle verification requests
$user->acceptVerificationRequest($verificationId);
$user->denyVerificationRequest($verificationId);
```

## Status Checks

```php
// Check verification status
$user->isVerifiedWith($recipient);
$user->isVerifiedWithGroup($recipient, $groupSlug);

// Check pending requests
$user->hasVerificationRequestFrom($recipient);
$user->hasSentVerificationRequestTo($recipient);

// Check if verification is allowed
$user->canVerify($recipient, $groupSlug = null);
```

## Queries & Retrieval

```php
// Get specific verifications
$user->getVerification($recipient);
$user->getLatestVerification($recipient);
$user->getAllVerificationsWith($recipient);

// Get verification collections
$user->getAllVerifications($perPage = 20, $groupSlug = '', $fields = ['*'], $cursor = false, $type = 'all');
$user->getPendingVerifications($perPage = 20, $groupSlug = '', $fields = ['*'], $cursor = false, $type = 'all');
$user->getAcceptedVerifications($perPage = 20, $groupSlug = '', $fields = ['*'], $cursor = false, $type = 'all');
$user->getDeniedVerifications($perPage = 20, $fields = ['*'], $cursor = false);
$user->getVerificationRequests();

// Advanced queries
$user->findVerifications($status = null, $groupSlug = null, $type = null);
```

## User Collections

```php
// Get verifiers
$user->getVerifiers($perPage = 0, $groupSlug = '', $fields = ['*'], $cursor = false);
$user->getVerifiersOfVerifiers($perPage = 0, $fields = ['*']);
$user->getMutualVerifiers($otherUser, $perPage = 0, $fields = ['*']);

// Query builders for advanced filtering
$user->getVerifiersQueryBuilder($groupSlug = '');
$user->getMutualVerifiersQueryBuilder($otherUser);
$user->getVerifiersOfVerifiersQueryBuilder($groupSlug = '');
```

## Counts & Statistics

```php
// Get counts
$user->getVerifiersCount($groupSlug = null, $type = null);
$user->getPendingVerificationsCount();
$user->getMutualVerifiersCount($otherUser);
$user->getVerificationCount($recipient);
```

## Eloquent Relationships

```php
// Access verification relationships
$user->verifications();
$user->verificationGroups();
```

## Groups

Configure verification groups in `config/acquaintances.php` under `verifications_groups`. Example:

```php
'verifications_groups' => [
    'text' => 0,
    'phone' => 1,
    'cam' => 2,
    'personally' => 3,
    'intimately' => 4,
],
```

Group management APIs:

```php
// Group a verification
$user->groupVerification($verifier, $groupSlug, $verificationId = null);

// Remove from group
$user->ungroupVerification($verifier, $verificationId = null);

// Get verification groups for a specific user
$user->getVerificationGroups($recipient);
```

You can also filter most methods by group:

```php
// Examples with group filtering
$user->verify($recipient, $message = null, $group = 'phone');
$user->isVerifiedWithGroup($recipient, 'phone');
$user->getVerifiers($perPage = 0, $groupSlug = 'phone');
$user->getVerifiersCount($groupSlug = 'phone');
```
